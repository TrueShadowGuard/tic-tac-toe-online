(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{11:function(e,i,t){"use strict";t.r(i);var n=t(6),a=t(7),s=t(4),d=t(10),c=t(9),r=t(0),o=t.n(r),l=t(3),m=t.n(l),j=t(8),u=t(1),v=(t(16),t(2));Object(u.f)({enforceActions:"never"});var h=Object(j.a)(function(e){Object(d.a)(t,e);var i=Object(c.a)(t);function t(e){var a;Object(n.a)(this,t),(a=i.call(this,e)).field=void 0,a.gameList=[],a.role=void 0,a.id=void 0,a.isConnected=void 0,a.isGameOn=!1,a.isWaitingForPlayer=!1,a.isMyTurn=void 0,a.gameId=void 0,a.socket=void 0,a.createGame=function(){a.socket.send(JSON.stringify({event:"createGame"}))},a.joinGame=function(e){a.socket.send(JSON.stringify({event:"joinGame",data:{gameId:e}}))},a.turn=function(e,i){a.socket.send(JSON.stringify({event:"gameTurn",data:{gameId:a.gameId,role:a.role,x:e,y:i}}))},Object(u.l)(Object(s.a)(a),{id:u.m,field:u.m,gameList:u.m,isConnected:u.m,isGameOn:u.m,role:u.m,isMyTurn:u.m,isWaitingForPlayer:u.m,gameId:u.m});var d=new WebSocket("ws://localhost:80");return a.socket=d,d.onopen=function(){console.log("connected to server"),a.isConnected=!0},d.onmessage=function(e){switch(e=JSON.parse(e.data),console.log(e.event,e.data),e.event){case"init":a.id=e.data.id;break;case"field":a.field=e.data.field;break;case"gameList":a.gameList=e.data.gameList;break;case"gameCreated":a.isWaitingForPlayer=!0,a.gameId=e.data.gameId;break;case"startGame":a.isGameOn=!0,a.isWaitingForPlayer=!1,a.role=e.data.role,a.isMyTurn="x"===e.data.role,a.gameId=e.data.gameId,a.field=[[" "," "," "],[" "," "," "],[" "," "," "]];break;case"finishedGame":a.isGameOn=!1,alert("\u0418\u0433\u0440\u0430 \u043e\u043a\u043e\u043d\u0447\u0435\u043d\u0430, ".concat("draw"===e.data.result?"\u043d\u0438\u0447\u044c\u044f":e.data.result+" \u0432\u044b\u0433\u0440\u0430\u043b"))}},d.onclose=function(){a.isConnected=!1},a}return Object(a.a)(t,[{key:"render",value:function(){var e,i,t=this;return console.log("gameList",this.gameList),Object(v.jsx)("div",{style:{fontSize:32},children:Object(v.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{children:["\u0412\u0430\u0448 id: ",this.id]}),Object(v.jsx)("div",{children:this.isConnected?"\u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u043c \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e":"\u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u043c \u043f\u043e\u0442\u0435\u0440\u044f\u043d\u043e"}),Object(v.jsx)("button",{disabled:this.isGameOn||this.isWaitingForPlayer,onClick:this.createGame,children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0438\u0433\u0440\u0443"}),this.isWaitingForPlayer&&Object(v.jsxs)("div",{children:["id \u043b\u043e\u0431\u0431\u0438: ",this.gameId]}),this.isGameOn&&Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{children:["\u0412\u044b \u0438\u0433\u0440\u0430\u0435\u0442\u0435 \u0437\u0430 ",this.role]}),null===(e=this.field)||void 0===e?void 0:e.map((function(e,i){return Object(v.jsx)("div",{className:"row",children:e.map((function(e,n){return Object(v.jsx)("div",{className:"cell",onClick:function(){return t.turn(n,i)},children:e},n+""+i)}))},i)}))]})]}),Object(v.jsx)("div",{children:null===(i=this.gameList)||void 0===i?void 0:i.map((function(e){var i,n,a;return Object(v.jsxs)("div",{children:[Object(v.jsxs)("h1",{children:["id:",e.id]}),Object(v.jsxs)("div",{children:[null===(i=e.players)||void 0===i?void 0:i.length,"/2"]}),Object(v.jsx)("button",{onClick:function(){return t.joinGame(e.id)},disabled:(null===(n=e.players)||void 0===n?void 0:n.some((function(e){return e.id===t.id})))||2===(null===(a=e.players)||void 0===a?void 0:a.length),children:"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0438\u0433\u0440\u0443"})]},e.id)}))})]})})}}]),t}(o.a.Component));m.a.render(Object(v.jsx)(h,{}),document.getElementById("root"))},16:function(e,i,t){}},[[11,1,2]]]);
//# sourceMappingURL=main.ab64b5a8.chunk.js.map